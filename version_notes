
Poltergeist Tests are working shitty.
Between each update, manually test:
    Giving quiz keys, student screen
    Giving quiz keys, objective screen, single student
    Giving quiz keys, objective screen, whole class
    Taking quiz keys, student screen
    Taking quiz keys, objective screen
    Changing Student's Teaching Request, Learning Request, and Preference Request
    Buy, sell, and use buttons in star market
        Visible from beginning when needed
        Appearing and disappearing when needed
        Properly updating inventory
        From Teacher Screen
        From Student Screen
    Give a student seminar bucks
    Give a student school bucks
    Student cannot change quiz answers after the quiz is finished 




2.73 RUBIFY CURRENT SCORES
Replace all calls to "points" with a "highest_points_all_time" or "highest_points_this_term"
Should be able to simply scan by date instead of messing with the ugly array.
Points_this_term simply checks whether it's larger, then updates if so
    But always override for a manual quiz
Migrate the renamed columns



2.72 CHANGE SEMINAR BUCKS TO FIT THE SCHOOL BUCKS SYSTEM
Currency model
    Student
    Teacher
    School
    Type (School or seminar)
    Value
    Comment
Clicking the button creates a currency object
Don't need seminar_bucks_earned or school_bucks_earned anymore. Instead, we'll use the method of adding all receipts
Use the new bucks_earned method everywhere appropriate
Bucks actually need to keep track of the seminar, not the teacher.
Each individual com_stud needs to be marked delivered. Not a quant delivered
Buying an item needs to enter the cost column of the commodity_student
Bucks current should find bucks eanred then subtract all costs of purchased items
Purchasing a commodity must also update the seminar or school column



2.71 FACULTY CAN MARK SCHOOL COMMODITIES DELIEVERED

Faculty can see all com_studs for unfulfilled purchases
Faculty can mark an item as delivered
    Mark one delivered
Button disappears when delivered equals quantity
Stars and gems are marked false by default in the deliverable column
Pre-requisistes typo 



2.70 DRY THE TWO DIFFERENT MARKET DISPLAYS INTO ONE
Make sure the javascript is working in both markets
 Commodity needs attributes "salable" and "usable"
     If it is salable then offer the sell button
     If usable, offer usable button
 Salable attribute can be edited
     "Usable" only applies to stars and gems
 Default salable and usable
Migrate salable and usable




2.69 STUDENTS CAN BUY SCHOOL COMMODITIES 2.69

Migrate
    Commodity_Student
        Quant_Delivered
    Commodity
        Deliverable
Market screen shows the student how many bucks she owns
And the amount of each quantity purchased
When student buys an item from the store, it increases his quantity
Jquery updating of school bucks and quantity
You are loading turbolink from a script element inside the body element
Javascript for making the buy and sell buttons appear and disappear needs to iterate through all
    commodities and have different results for the different prices
Student has a link to the school market from her class page
Test that button to create a new item doesn't appear for school_admin 0
Show the name of the school market everywhere appropriate
Pluralize the display of currency
Remove "help" tab from navbar




2.68 CREATE SCHOOL ITEMS

Create commodities for school market
    School edit submenus includes market
        Market view includes button to "Create item for school market"
        Create item screen allows admin to change name, image, cost, and quantity
        When saved, goes with school instead of teacher
    Custom commodities cannot be named "star" or "gem"
    Only level 1 or level 2 admin can do it
Index Commodities
Edit Commodities
Delete Commodities
Will probably need to paginate
Level 2 Admin can change the name of the school's currency and market in the "School Info" tab
Default values for currency name and market name
School Edit page needs to set the state to default to the school's state. 
Student has option of "School Market" upon logging in
If student buys school item, buy button sends school param
    Otherwise, it sends seminar param
    Controller determines which bucks to subtract
But student cannot edit or delete.  Only buy.
When viewing school market, student can see all items that were created for the whole school



2.67 COMMODITY-STUDENT CREATION UPON STUDENT BUYING
App currently creates a commodity student every time a commodity is created.
Instead, create the commodity student when a student buys something.
    Unless one already exists.
    View for class star market will load with commodity id instead of commodity student id
    Back-end finds the com_stud id, or creates one




2.66 ADMIN ACCESS

User model
    :school_admin :integer
No longer need the mentor aspect.  Simply set each user's school_admin access
First teacher to create a school is an admin by default
Admin can adjust admin status for other teachers
    When editing school, list all the teachers
    Each gets a radio set to change the admin status
    Radio set can grant admin status matching current_user's admin status, not higher
    Can only turn admin status off if current_user's admin status is 2 or higher
Verifying other teachers should be moved to the school edit page
Only level 2 admin can edit the school's important info
Add field's to edit the schools's city and state


2.65 QUIZ FIXES

Contact Teachers who have signed up

Printable version of goal report is showing (?) instead of target
Quiz results need to show the correct number of stars.  This feature was broken after moving quiz-finishing method to the riposte controller.
To prevent back-tracking and changing answers after the answers are revealed, re-route student to quiz show page if the quiz already has a total score
    This should also prevent charging the student an extra key if the student refreshes.
Attribute :old_stars is given a value upon beginning a new quiz
Quiz score display should show added stars for this term, along with highest score all-time
Migrate Old Stars to Quizzes




2.64 STAR MARKET

Commodity model
    name
    image
    school
    user
    production_rate
    current_price
    production_day
    quantity
    date_last_produced
CommodityStudent model
    quantity (owned)
    avg_price_paid
CommoditySchool
    production (will multiply by number of students)
    current_price
    production_day
    created_this_week
SeminarStudent (update)
    bucks_earned
    gems_given_toward_reward
    stars_used_toward_grade (array with four spots for four terms)
Seminar (update)
    default_buck_increment
    class_reward (name of the reward)
    target_rate (gems per student)

Teacher needs to be able to edit the class that she just created.
Update teacher viewing student to resemble the student's own view
    One of the submenus is star market
    Edit/Move Student needs to be moved to this window
    edit_teaching requests action and view can be deleted
    Then I can probably move the teaching_requests and all_student_scores views out of shared and into the seminar_student folder
    Test teacher updating all aspects of show page
    Need to be able to get back to scoresheet
Teacher can give bucks to students.  Increases bucks_earned in SeminarStudent
Should be ajax, not a full http call
Teacher can set default increment for each seminar.
Students bucks increase by default increment.
Also allow for custom amount
Create new stars when weekday is past production day AND days since last production > 1
OR if days since last production > 7
    (Release the stars all at once, to make more interesting fluctuations)
Teacher can "buy and keep" stars for student
Submenu shows supply and current price
And number that student currently owns
Teacher can "buy and use" stars for student
Total stars method includes stars that have been applied
Don't show the buttons for adding bucks if student is viewing the page
Don't show buy button if student doesn't have enough money
Don't show sell button if student owns zero copies
Don't show buy button if school supply is out
Erase buy button if student cash goes below need
    Or if school supply hits zero
Erase sell button if student supply hits zero
Buy button should appear if student gains enough money
Sell button should appear if student gains a copy
Prevent sell in back-end if commodity quantity runs out
    Think about multiple students buying at the same time
Include the image for each item
Create stars commodity when new teachers are created
Creating a new class needs to assign that class to the teacher
Create commodity_students for new students
Create one for transferred student if it doesn't already exist 
Change the school_year of a seminar when creating
    And when editing
Scoresheet grade page shows quiz stars and total stars (including applied stars)
Student star page shows quiz stars and total stars
    Total quiz stars for all time includes pretest stars
Student can see account values
Dry up the javascript dealing with requests
Dry up view for requests

Migrate
    SeminarStudents
        bucks_earned to 0
        gems_given_toward_reward to 0
        stars_used_toward_grade to [0,0,0,0]
    Seminar
        default_buck_increment to 5
        class_reward to "Not yet named"
        target_rate to 5
    Existing SeminarTeachers need edit permission



2.63 TOTAL STARS FOR CURRENT TERM
E-mail MaryAnn Moore?
Students need a column to track their school year.
Also, a default school year for the class.
The scores_record column in the ObjectiveStudent model is an multi-dimensional array of scores by school year and term.
    Column is an array [0,3,8,0].  In this example, the student scored a 3 during second term, and an "8" during third term.
    The points column still keeps track of a student's highest score so far.  That will be needed for desk consultants
Also a pretest column, for results that don't go on the term grade
Also a teacher-manual column.  That might be needed sometimes.
The current_scores column will keep the scores that are used all year.  Only move them into score_record at the end
Put new columns in seeds, fixtures, current database, ...
When creating new students, this column is pre-filled with the seminar's default school year
Choosing the school year needs to present user with an array that includes kindergarten and pre-school.
    But the data goes into the db as an integer.
When a student takes a quiz, update the array score in the spot for that term, and also in the highest score so far
Update the pretest column instead of the term grade if the quiz is a pretest
Don't give dc_keys to a student who already has 100 as his current score
Complete all updates when teacher updates scores manually
I have manual scoresheet test for when the student did better last term.  Should have a quiz result test for the same 
Function adds the total points from all obj_studs for the current term
Fix the user fixtures so that I can add to them efficiently
Scoresheet should show current term by default
View scores from different terms
Need an option to show all possible scores, or just the objectives involved in this term
Change default student password to be completely equal to the username
Term needs to be located in school, not seminar
Seminar needs a method that looks at its school to determine its term
School model needs default term set to zero
School also needs term start and end dates
System needs default term start and end dates
Allow mentor teacher to edit term start dates and end dates for the school
Test that only mentor teacher can do this
Check whether the current term needs to be updated when somebody logs in to the class
Also do this when a student logs in
Students who have no school will run into errors with terms and stuff.  This will happen to all students whose teachers have not been verified.
    I should set a student for the specific school.  But also mark whether a student has been verified.
    Only verified students can be found in searches.
    Students get auto-verified if the teacher who creates them is already verified
    Test that students don't become verified if their sponsoring teacher is rejected by the mentor
Don't update the term anymore just by the teacher switching views in the goal_students index
Update a students' school year
    Which also moves the current scores into score record
    And turns current scores to nil
Default values are pre-filled when editing, particularly with labels for questions, and public extent
Don't place a student into a group if he/she already has keys for that group
Urgent priority objectives are choosing consultants who have already scored 100.  That needs to be minimized.
Show student's school year in profile view.

Give existing students a school year
And a school
Schools need terms
And term dates
Update current scores and score record for existing students
Change password for existing students to be equal to their username
Update existing students to verified




2.62  GOAL TOUCH-UPS
Include grade percentage in teacher index report
Grade percentage should not go below zero.
Only use grade percentage if the checkpoint action includes (?)
"Made!" should only apply to checkpoitns that include (?)
Include grade percentage in student printout
Show goal deadlines and grade percentage in student show page
Make sure the final goal report fits on one page
Make checkpoint index screen take up less room
Student can't move on from screen after changing goal
Don't offer the choice to change the checkpoint action if there is only one choice
No goals are showing up in goal index
Add sequence to the checkpoint table
One comment is editable, but it's different depending on whether student or teacher is viewing
Put the color back into the table
Finish taking away all best_in_place cells for students and printing
Move all poltergeist tests into the poltergeist test folder



2.61 TEACHER GRANTS KEYS
Students can earn "keys" to take their quizzes.

Objective_student model needs to include:
    pretest_keys
    desk_consultant_keys
    teacher_granted_keys
Default for all keys should be 0 instead of nil
Teacher can click the student view, and then be able to check/uncheck certain objectives to unlock the quizzes
Teacher can add 1 key or 2 keys
Show the current keys when the teacher visits this view
Maximum of six keys
Teacher can visit the objective view, and then check/uncheck students.
Button to give keys to whole class
Don't allow keys to go below zero.
Teacher can take keys by clicking on any of the key icons
Make sure the newly-added keys also work
Test the objective side
Testing the appearance of the keys within the divs might work now that I fixed all the back end
Add key button needs to work for students who have multiple classes
Take away key-adding buttons if the student has more than six keys
Quiz appears to a student who has keys
Starting a quiz subtracts a key
Which key to use with the "Try Quiz Again" button
If a student already has six tries on one quiz, it erases his oldest when he starts a seventh try
Set all keys to zero if a student achieves a score of 100
Establish the scores upon finishing the quiz.  Not upon showing it.
    Will need to add an added_stars column to the quiz model so that it can update that only upon finishing the last question
Taking keys for a 100 percent score also needs to happen when the teacher inputs a score
Show student how many keys she has

Back-end won't add keys to a student who has already scored 100
Front-end shows "This student has scored 100" instead of key-adding buttons.

Only include teacher granted quizzes if the student is ready (has met the pre-reqs)
Teacher should see a small notice if students are not ready when teacher is granting keys

Merge "teacher_granted_quizzes" and "pretest_quizzes" into one method
Instead of offering all pretests, students receive keys to the pretests.
    Keys are given when a student joins a class
    Keys are also given when an objective is changed to a pretest
    If pretest objective loses its pretest status, students with pretest keys lose them
    If a student fails a pretest on her last try, she loses her pretest keys to all of the post-requisites for that objective
        Will need to keep track of whether a quiz is a pretest
If a student earns other keys on a pretest objective, the pretest keys will disappear
Being placed into a consultancy team gives a student two dc_keys

Add student PrivacyPledge logo on some pages.
Order objectives in priorities screen


2.60 ACTION SAVING
When student saves her checkpoints, it should save with a (?), not the actual target number.
I think the best place to change this is in the update_checkpoints action of the goal_students_controller
Display the version with the target, but save the original action.


2.59 ARROW KEY NAVIGATION
The scoresheet needs to allow for arrow key navigation
Crosshairs on selected cell



2.58  IMPROVED APPEARANCE OF CHECKPOINT PAGE
Put MrZ School image footer on the bottom of every page when printing student goals.
But not the link. We don't want it to print that




2.56 LEVELS OF PRIORITY

Allow up to five levels of priority, instead of 3
"Accept Invitations" list is one long row.  Should be many rows. 
Include a zero in the percent array
Cannot "Stop Editing Privileges" from self
Can only invite approved teachers to share classes
Rename "unverified_teachers" to simply "unverified_teachers"
Buttons are too big for their table rows.
Live site is throwing an error with objective index for admin






2.55 ALLOW CLASSES TO HAVE MULTIPLE TEACHERS
Sometimes teachers need to be able to share classes.
Change architecture to allow for the possibility.
Creator of class can grant privileges to other teachers
    Viewing privileges
    Editing privileges
Add menu option to invite other teachers.
    Menu includes which privileges to grant the invited teachers
    Newly-invited teacher then accepts invitation
    Test that decling an invitation deletes the SeminarTeacher
    Dry up the creation of submenus
    Teacher needs to be able to remove a class from her list without deleting the class
    But if the only teacher with editing privileges wants to remove a class, the "Remove" option is not available. Only the "Delete" option
    Seminar_edit_view shows all teachers that share the class, along with their priviliges.
Other aspects that teachers cannot edit if they don't have permission
Remove an objective from a class
Remove a class from an objective
Remove a pre-requisite
Migrate to add seminar_teacher
Seminar.all.each do |seminar|                                                                                                              
    seminar.teachers << Teacher.find(seminar.user_id)
end




2.54 STUDENT VIEW

Finish erasing all references to benchmark
Give the student view the same treatment that I gave the seminar_edit view, with submenu clicking
Both the student_view and the seminar edit view need to start with a default tab highlighted
And move the studentview into the seminar_students controller
Deleting a class isn't working on the live site
    But it is working in the test.
    At the end of this update, see what's wrong on the live site.
Navigating seminar_student view.  Certain fields should be visible/invisible
When clicking on an objective, it SHOULD offer the "Update Class" button, because teachers can choose which of their seminars that objective is connected to.
Smaller Apple Icon
Home Icon instead of "Your teacher page"
Maybe NavRibbon shouldn't show the class name.
    That might allow me to delete limitedName method
Fixed an error upon updating a class that has no objectives
Printable Goal Screen links to scoresheet. Should have reg navribbon
    Test that back-link
Migrate to remove benchmark column


2.53 TARGETS WITHIN ACTIONS
When updating a target, it doesn't seem to update the checkpoint actions.
Make sure that updating a goal target, etc, doesn't change the student's actions by calling the gs_update_stuff function.
Complete the percent_array. The lower numbers are needed for marking low achievement.
Test that "Update this goal" button appears when student changes the goal.
Cancel button while creating a new class.
Erase "Make sure to award consultant points"
Capybara test for chart attendance
Test that "verify other teachers" message only appears for the mentor teacher
Only mentors can reach the verify screen through the url



2.51 TEST NAVRIBBON
NavRibbon now needs an icon to edit the class.
Teacher profile should offer the same main icons as the navribbon.
Move objectives, pretests, and priorities into the seminars controller. Make them part of the seminar form editing




2.50 GOAL IMPROVEMENTS
"Lock this goal" button changes color
Show deadlines on printed report


2.49 STUDENT SEES TARGETED
When a student is choosing her checkpoints, she sees her target in the checkpoint instead of the (?)


2.48 MOVE GOALS WITH STUDENT
When moving a student from one class to another, the goal goes with them.




2.47 STUDENT NEEDS TO BE ABLE TO CHANGE CHECKPOINTS UNLESS THEY ARE PAST THEIR DUE DATE

Due date is currently a column in the checkpoint table. It needs to be in the seminar table.
Teacher can set due dates for a seminar in the seminar edit screen.
If the due date for a checkpoint is two days away, or passed, it cannot be edited by a student.
Inform the student if the due date is past when she tries to choose a checkpoint.
Option to copy due dates from another seminar
The page where the student changes the goal needs to have the default value entered if the student has already chosen.
Error upon student using the back_link
After migration, add checkpoint_due_dates to all existing seminars.
Teacher can edit checkpoints




2.46 GOAL FIXES

Error in teacher navigating among term and checkpoint
To ensure goals and checkpoints are updated and displayed correctly, goal_students and checkpoints need term and sequence after all
Won't need this_gs_term anymore
Students should be able to edit their comments for any checkpoint.
Allow student to choose from among all four checkpoints.
Fill in the terms and sequences for goal_students and checkpoints




2.45 STATEMENT STEM

Need to be able to edit the statement stem
Error upon admin deleting an objective. I think it only happens with private objectives.


2.44 GOAL ADDING AND EDITING

Admin and teachers can go to a "Goals" page
Can create a new goal, along with its actions
Can click an existing goal to change its name and actions
Can only edit goals created by yourself
Look at my existing tests for permissions for objectives, labels, etc. Duplicate those for goals
Submit button shouldn't appear in any forms if the viewer doesn't have editing permission
Use the partial for extent and user everywhere applicable
Tests should include changing the extent
    Label Test
    Objective Test
Test failing at creating a goal, then fixing it.
Goal will not validate unless an action is entered for all four checkpoints.





2.43 AJAX TESTS (Didn't make a git branch)
I considered converting the approval and goal choosing to best_in_place functions to cut a lot of jquery. But the jquery version seems to work better.
Don't offer "Approve" button while no goal is set.
I eliminated the dropdown menu for logging out and replaced it with a simple link. The dropdown wasn't needed.
But now I'll need to fix all the tests that included logging out.
Write test so that student can choose goal and teacher can approve it.



2.42 SMALL FIXES

It needs to update the school upon adding a new student.
    But only if the teacher is verified.
    Test that it doesn't add the school if the teacher is unverified
Errors caused by trying to load a seminar when the student had teams with objectives from another seminar. 
Remove "Id" from student search attribute choices.
Need to test objective-gathering methods if the student has teams from another seminar.

2.41 IN-APP GOAL TRACKING   
Students can set a goal for each term, and checkpoints toward meeting those goals

Goal model
    Action_1 ...
    Action_8
    Second_action_1...Second_action_2
    Style (Percent or Number)
Goal_Student
    Student
    Seminar
    Goal
    Term
    Approved
Checkpoint
    Belongs to one goal_student
    Action (Associates with one of the goal's 8 possible actions)
    Achievement
    Notes
    Due Date
Seminar has_many goal_students
Student has_many goal_students
GoalStudent belongs_to user
    belongs_to seminar
    belongs_to goal
Checkpoint belongs_to goal_student
Adding a student to a class creates four empty goal_students
Empty goals should also be created when a student is added to a class
In goal menu, student sees list of four goals
Can edit one of the four
    Default goal name should be or blank or something
Goal model needs different actions for the halfway checkpoint
Teacher can approve goal choice
    So add "approved" to goal_student
    Set it to default false when a new goal_student is created
    Teacher can click "approve" to change goal_student to approved
Teacher can change goal choice
When teacher a goal is set (by teacher or student), the checkpoint actions are automatically set to default actions
Student chooses target for goal. Then the text of the goal and checkpoints is updated to a goal statement that includes the target percentage.
If all goals are approved, teacher sees a list of checkpoints, where comments can be made and achievement marked
    If some goals are not approved, route teacher to the list of goals.
In goals_approve, teacher can change the student's goal target.
JQuery for teacher changing student's goals
    Ajax needs to work upon changing the select box, not pressing the "Approve" button
    Approve button disappears when a choice is made.
    Default for teacher's choices needs to be the currently selected choice, if it exists.
Need to create 4 checkpoints, not 3. This gives the chance to mark achievement and comments for the final goal.
Teacher can see a list of current checkpoints for whole class.
I think that instead of saving the action and final statement, there should just be a method in the goal_student model that creates the statement using the action and the target.
    Then it won't matter if the statement updates.
    So statement_stem can be eliminated from the goal_student model.
    But the data that used to be in statement_stem is now moved to the last row of the action_array.
Message at top of view_goals reads, "5 students have goals that you haven't yet approved"
Teacher needs a button to go from the "Approve" screen to the "View" screen
    And vice-versa
In student_view, student sees only the current goal and checkpoints by default.
    Display all checkpoints.
    Display simple made/not made indicator.
    Highlight the current checkpoint.
Show student comments and teacher comments in goal display.
Student can edit his comment.
    But only the current comment.
Teacher can see comments and edit her comment.
After goal_student is approved, student can no longer change it
    Teacher can still change goal
NavRibbon for changing term needs to be in the approval screen also
Checkpoint should allow teacher_comments and student_comments
I'd like to move the goal stuff into goal_students controller instead of seminar controller
Each goal needs to have a statement_stem after all. Using the fourth action as the goal statement is awkward.


After migrating to production site, make sure to add needed goal_students and checkpoints.
    And goals.
    Current term to seminars
    Which_checkpoint to seminars

2.40_DESK_CONSULTANTS_TESTING
Complete one test for each method needed in the DeskConsultants algorithm.
Unplaced students should be one group that contains all unplaced students instead of creating a new group for each unplaced student.
I think there might be a major problem with type mismatch of requests. It's not causing an error in the live site, but it is definitely preventing requests.
    Problem fixed. Now all references to requests are integers, not associations. 
Replace the student_hash and most of the score_hash with rails-y methods.
But probably keep the "need" aspect. Replacing that with a method would require calling the students_in_need method many times. And every call on that iterates through all the scores and the 
    check_if_needed.
The instance variables for specific objectives should be adjusted to match the rest of test_helper.rb
Need to test results when there are two "priority 3" objectives.
    There could be a problem caused by looping on the second objective.
I think I skipped a test to make sure that all consultants are qualified
And apprentices_placed_by_request should be in a team that fits their needs
Need to order the list of consultancies when teacher checks it
The delete buttons are out of place there
Make sure that ajax requests are responding

2.39 CLEAN TEACH OPTIONS
Teach_options can be cleaned and incorporate priority. 
When D-C checks teach_options, it should just check rank_objectives_by_need instead.
Change all calls to rank_objectives_by_need. That's now a model method
And teach_options is now a student method
Can erase teach_options concern

2.38  IMPROVED RANKASSIGNMENTS BY NEED--PUSHED 10/26/2017
Rank assignments by need should be based on the most requested, not the highest need.
    There are some downsides to this approach, but it should at least run quicker when creating a new consultancy and also when simply viewing a student's page.
    Because requested is a simple column in the join table. Not a method that looks at every student's readiness, which also iterates through pre-requisites. 
students_in_need may not be neccesary anymore
See whether it is actually used in student view

2.37 BUG WITH ADDING STUDENTS
There was a bug that caused the scoresheet to show "0" for students who were added to a class.
I found this was caused by the model adding a new objective_student for the assignment, even though the student already had one. The scoresheet was showing the new one.
Now the program only creates a new obj_stud if one doesn't yet exist.

2.36_HOTFIXES--STARTED 10/13/2017
Fix CSS for big_links
Make sure errors show up correctly when incomplete school info is entered. 
What if teacher doesn't enter a school id OR create a new school?
It seems many controllers are missing tests for flash info for errors
    I'm looking at controllers one at a time. I've reached "picture"
Picture tests   
    Test for submitting a picture with no file
    Picture Edit Test
The delete button should be in it's own div. Don't include a td within the partial.

2.35_CONSULTANT_MARKING -- STARTED 10/10/2017
                        -- PUSHED 10/13/2017
Students are being marked as consultant, even when not qualified.
Consultant View
    Consultant link from show page leads to the most recent consultancy
    On that page, there is a button to create a new one
    Or to see the index of all old ones
    Index includes option to delete
    And so does the show page
    Consultancy in navribbon

2.24_CONSULTANT ORDER -- STARTED 10/07/2017
                      -- PUSHED 10/10/2017
Goal of this update: consultant_days is based on the number of days since the last time that student was consultant in that class.
Then adjusted_consultant_days takes the student's request into account by simply adding a day for those who request positively. Then multiplying by a small factor.
    Subtract then divide for those who request negatively.
Marking students absent is failing again!
When a teacher adds a student to his/her class, update that student's sponsor
New school info should be in its own bubble

2.33 SCHOOL--STARTED 09/24/17
          --PUSHED 10/6/2017
Goal of this update: Student and Teacher accounts need to be assigned to a school.
    Searching for students can only occur within a school.
    Except for admin
Migration
    School Model
        Name
        City
        State
        Mentor
    User
        School_id
        Verified (Only applies to teacher)
        Sponsor (The teacher that created the student or last added the student to a class)
When a teacher starts a new account, first show a "School" page
    Choose from list of existing schools
    Or field and button to start a new one
        State picker selection box
    First teacher to create a school becomes that school's mentor
Approval by mentors
    When mentor logs in, if their school has unverified teachers, button to appove is offered
        This button appears at the top of the teacher's view page.
        Test that the message doesn't appear if all teachers are verified
    Once approved, all students created by new teacher have their school field updated
Searching
    Approved teachers can find students from the teacher's same school
    But not from other schools
    Unapproved teachers can find students they've sponsored
Migrate
    Update school_id
    Sponsor
    Verified
    




2.31 MOVE STUDENTS--STARTED 09/19/17
                    PUSHED 09/24/17
Goal: When teacher looks at a student, there's an option to move the student to a different class
    Underneath remove button, there's a "move" button
    The class choices are there from the beginning, but hidden. They appear when "move" button is pressed
    Clicking one of the classes creates a stud_sem
    Then deletes the old one
        Will need to add a parameter to the "add student" form to determine whether an old ss should be deleted.
Fix Removing a Student From a Class
Don't offer classes that the student is already in
New logo
Add to_unhide to themScores
Outline color for confirm buttons



2.30 BENCHMARK STARS--STARTED 09/13/17
Goal: Keep track of Benchmark stars. This will allow for tracking current stars. 
student_seminar needs benchmark_stars column.
Teacher can go to a benchmark_stars screen to set this
    By default, all students are checked in order to set them at once
     Teacher can uncheck some of them
    When submitted, benchmark stars are updated to equal the student's current stars
Scoresheet shows total stars, benchmark stars, and current stars
    Current stars is simply total subtract benchmark
Set default benchmark to the student's total stars
A bit of coloring for those columns in the scoresheet.
Show benchmark and current in student_view
Temporarily remove the feature to search for existing students. 
Add Privacy Policy to site
Migrate after deploy
    Set all existing benchmarks to zero


2.29 QUIZ PROGRESS--PUSHED 09/13/17

Goal: Track a student's progress on a quiz so the student can resume if interrupted.
Add "progress" column to quiz table
Update this column whenever student answers a question
On student's log-in page, offer "Unfinished quizzes"
Clicking an unfinished quiz brings student to the correct riposte
Unfinished quizzes no not appear in the other offerings
Answers should not display red if the problem is with spacing
When editing a multiple-choice question, current correct answer should be the default there too
Testing fails for all questions that include a picture
"Back to class" button should work as a whole button, not just the text
Enhance security so that my code isn't getting shown
Migrate after deploy
    Set progress for all eixsting quizzes



2.28 CORRECTED IMAGE UPLOADING--STARTED 09/07/17
                            --PUSHED 09/08/17

Signed up with Amazon s3 and configured heroku to work with it



2.27 HOTFIXES, SEP 2017--STARTED 08/24/17
                        --PUSHED 09/07/17

Screen for editing a label has headline twice.
When I was logged-in as an admin, I went back to the home screen, then tried to get to my profile. It threw an error because it tried to go to the students show page.
If a label is deleted, all the questions that had that label should be changed to "Unlabeled"
All delete buttons in all indexes should work the same as I just updated for the labels.
    And the tests.
Picture has associtions, so it's throwing the to_sym error
    Test deleting picture
Figure out how to handle the deletion of students and teachers in their indexes. Because those objects don't have a user column
Figure out what to do about teams upon deleting consultants or objectives. Teams will be left with dead links.
Right now ALL of the confirm buttons pop up when trying to delete an object. It should only pop up the appropriate button.
Labels should be ordered by name wherever they are listed.
    "Unlabeled" should come first in every list. Maybe just start it with a zero.
If a question is deleted, the quantities for label_objectives needs to be affected. Otherwise there will be a major error when trying to create a test for that objective.
    Either warn the user that many tests will be affected. Or don't allow deleting below the threshold for all tests that would be affected.




2.26 IMAGES WITH QUESTIONS--STARTED 08/23/17
                        -- PUSHED 08/28/17
Goal of this update: Allow teachers to associate uploaded images with specific questions. 

List options for labels when uploading a new image
Don't show destroy or edit button in picture index if the current_user isn't the correct one.
    Finish testing for this
Question edit form lists the images for the selected label
Display that image when the student is answering the riposte
quiz_size needs to be bigger. about twice
Picture should also show in the quiz report
Check whether checkboxes allow for changing labels
Need option for "No picture" that is set by default
    And can be set if user makes a mistake in clicking a picture.
Test changing picture in question edit form.
Finish "destroy" controller method for questions so that questions can be deleted.
Test for editing a question and changing its picture
Test in development
    Test changing the image manually
    Test changing a question to "No picture" manually
Re-insert the line that sets current_class to nil so that when editing questions, objectives, and labels, the back-link directs to teacher's show page, not a scoresheet.
Show image thumbnail in question index
Migrate to add :user to pictures
    And make sure that no pictures have a nil user







2.25 CUMULATIVE STARS--STARTED 08/19/17
                    --PUSHED 08/23/17
    Goal for this update: Keep track of the total number of stars that a student has earned and report that instead of the total number of points a student has earned
    Add total_stars method to SeminarStudent that sums the stars
    When a quiz is finished, if there were any stars earned, add them to the total_stars for all seminars which include that objective
        The test should try twice and see if the increase works both times.
    Show total_stars as the main feature of the student_view
    Show total_stars as the first column of the scoresheet instead of the Total Points
    Save a student's score as a multiple of 10.
    When a student finishes a test, the new stars should be a more attractive icon, instead of the asterisk.
    Consultant Threshold needs to be on a scale out of 10.
        Check the default
        And the choices for setting threshold
        And the seeds too.
    Try again to fix the error that occurs when the a too-large user-number is entered.
    The log-in form should go back to being a centered, offset column
    Change the description on the home page that makes it seem like the whole site is about DeskConsultant
    The logo in the footer links to Desk Consultants.com. It should link to the new, correct site.
    Need to update last_login upon creating a new account Otherwise it's nil and creates an error in the index.
    Links to go "Back to your Class Page" or "Try this Quiz again" are not friendly



2.24 HOTFIXES--STARTED 08/14/17
            --PUSHED 08/18/17
Made it so that the pretest options don't show up if the teacher didn't add any objectives to the classroom. That was pretty confusing.
Clean up the new and create actions in the objectives controlleR
Error upon entering a student number that's too long
    4358204269 is out of range for ActiveModel::Type::Integer with limit 4 (Stud number too long)
Eliminate the back-link on the scoresheet view because it links to itself.
Change "Label for Pictures" to Unlabeled
Short_name should include 30 digits instead of 20.
    Most of those forms shouldn't be displayed in the squished-centered version.
"Quantities and Point Values" should go on a separate line
"Back to Your Class Page" should be a button.
Add a "Try Again" button for the student when she finishes a quiz?
Migrate heroku after push


2.23 IMPORTANT FIXES BEFORE ANNOUNCING TO OTHER TEACHERS--STARTED 08/13/07
                                                        --PUSHED 08/14/17
Goal of this update: Fix a few errors before offering the program to the teachers who have expressed interest.
Comment out the links to pictures. Return them after I fix the pictures features in the next update
Make sure that teacher can submit an objective without selecting some labels.
The update action for the seminar_students controller is no longer needed
Test that no errors occur if a user creates an objective without any labels
There were no seeded objectives with a "public" extent. There needs to be some.
An error occurs when students try to take a quiz that doesn't have any questions.
I learned how to use "Like" in the index. So I don't think I need to downcase names anymore. I can allow users to input the names how they want.
Take another look at "boulderfist" classtype and the dialog box that it should produce
Message about having no questions should go in the quantities screen. Not on the teacher show view
    Test for this message
    And also for the message in the quantities view that a label does not have any questions.
Make icons for all screens that should have one.
    Student
    Students
    Teacher
    Picture
    Multiple Consultancies
    Seminar
Teacher clicking on "Consultancies" when none exist yet.
Clicking on a class in the navribbon directs to that class show view. It should direct to the scoresheet or edit view.



2.22 FILL-IN QUESTIONS-- STARTED 08/08/17
                    --PUSHED 08/13/17

    Goal of this update: Offer "Fill-in" questions as an option for teacher who are writing assessments
    Question table needs to be updated with the "style" attribute
        Validation must require "style" for every question
    Test for if a question is at first invalid, but then submitted successfully
    When user begins writing questions, they first choose label and type on one screen
        Editing prompt and answer choices will occur on the next screen.
        But answer choices won't be offered for "fill-in" questions. Instead, several blanks to enter all possible answers
        Saving these questions saves an array with many possible answers
    When comparing student answer to the correct answers, both sides is downcased and spaces are removed.
    Make sure that questions can be checked and graded correctly.
    Test changing label and extent
    While editing a question, don't allow editing the style
    Add Style for seed questions
        And seed a few fill-in questions
    Instead of splitting all the different form parts by @assign_permission, redirect the user to show or edit based on that variable.
        Update the tests for viewing another teacher's question.
    Test for editing fill-in questions
    The fixtures probably don't need to load associations in the test helper anymore




2.21 PRE-TEST QUIZ UNLOCKS--STARTED 08/05/17
                            -- PUSHED 08/08/17
    Goal of this update: Many quizzes can be set as pre-tests so that they are open to every student upon joining that class.
        
    This attribute is edited between the first seminar editing screen and the priorities. It only lists the objectives that are already in that class. 
        Teacher can check which objectives should be considered as pre-test objectives. Doing this adjusts a column in the objective_seminar model.
    ObjectiveSeminar model needs column for pre-test
        I'm coding that as an integer, not a boolean. That way, in the future, I might be able to set some pre-tests to open during 2nd or 3rd term
            instead of opening them all at the beginning.
    Create the view with the checklists
        Ensure that checks are working to adjust the pre-test attribute
        Ensure that routing to the next screen is still functioning.
    Test pretests and priorities for a new seminar
    Test a view that includes desk consultants objectives and pretest objectives both
    When new students join the class, the pre-tests are open to them.
        Lowest-level quizzes are offered immediately. Higher-level quizzes are offered if the student is ready for them.
        Test in seminar model should also check that unwanted assignments don't appear in pretest offerings
    Objectives where student has scored 100 removed from pretest offerings
    Objectives that student has attempted twice removed from pretest offerings
    Guard if a team has no objective so that student does not get an error in the view.
    Make sure to downcase usernames or it creates a problem with finding them
    Try to Eager load in a few spots
    has_not_scored_100 needs to apply to consultant objectives as well as pretest objectives
    Put the checkbox updating into on transaction so that servers, etc. never see the intermediate state.
    Clean up the routes file now that I know about :collection and :member

2.20 SINGLE-TABLE INHERITANCE--STARTED 07/30/17
                             --PUSHED 08/05/17
    One table for User
        Sub-table for teacher
        Sub-table for admin
        Sub-table for student
    Update the seeds
    Change "student_number" to "user_number" so that teachers can have Id numbers
        Search for all instances of student_number
    Look for all uses of the word "role"
    All of the calls to  'shared/teacher_name_and_edit' need input for the user: variable
    Capybara tests to replace all user tests that became teacher tests.
    Look for all instances of user_path or users_path
    Student test for when password is present
    Don't allow a student and a teacher with the same e-mail
    The total_points function in the Student model was made more efficient
    correct_user functions moved to the application controller
        Changed name to correct_owner
    Some calls to user_is_an_admin need to be redirect_for_non_admin
    Added tests for editing students.
    Dried up instances of current_user && current_user.type
    The require "rubygems" line was no longer necessary, but keep it in mind in case of UI failure
    "Users" controller and views are no longer be necessary
    Mr. Z School Logo


2.19  REMAKE APP IN NEW WORKSPACE--STARTED 07/18/2017
                           PUSHED 07/30/2017
    Start a new workspace that doesn't use the tutorial configuration
    Destroying user's seminars and objectives needs to move from the controller to the model.
    Look at the edit action for the users controller. It looks like it's set up to work
    for students, not teachers.
    Put teacher titles into the DB seeds
    And Questions



****  THIS POINT MARKS THE BEGINNING OF THE VERSION NOTES. BEFORE THIS, I WAS
LISTING NOTES IN ASCENDING CHRONOLOGICAL ORDER.



VERSION 2.11 ADD QUESTIONS TO DB
    Migrate after deploy
        There might be an issue with the migration that added created_by to objectives
        Roll back to this migration. Then erase all old objectives.
        Need to eliminate the reference to "0" as a question/objective creator.
        
VERSION 2.12 UPDATED TESTS AFTER QUESTIONS
    Placement of created date in questions index
    Admin shows "Admin Page" and "Back to your Profile"
        Get rid of "Admin" link.
        Creating a question seems to be missing the "Back to your profile" link
    Test for message for teachers who haven't made any private objectives
    Make sure that when a user is deleted, to also delete that user's objectives.
        Otherwise those objectives will return an error.
        
VERSION 2.13 ASSIGN LABELS TO QUESTIONS
    User can create labels
        And edit
        And index
    Question form gives list of choices for labels
        "No label yet" option is the default checked radio button
        Write a test for that
    Default label is "Unlabeled"
    Label form lists questions that don't yet have a label
    Edit permission message should only appear once in the form, instead of appearing on every attribute.
    Question index allows showing questions by label
       Remember which labels are checked after form is submitted.
    Icon for label
    I suspect the live site might have issues with assigning a question with a label_id 0
        But if not, then leave that part alone.
        
        
VERSION 2.14 LABELJOINS (Later renamed to Objective_Seminars)
    Flaw from previous update where questions index wasn't showing labels to choose from.
    Next, make it so that checking a label creates a labeljoin
    Partial needs to include the permission aspect
    Test that mainassigns do not appear as a choice for a possible preassign
    Editor can edit how many questions from each label appear on the quiz for that objective.
    Editing Objectives goes to a radio button list of available labels so teacher can which label a question fits
        Then another screen where the teacher can choose how many questions from each label
        and the point value of each question from that label
    Total Point Calculator that updates as the values are changed.
    Test for editing labeljoins
        Test for Deleting a labeljoin
    Create a New Objective should read "Private Objective" instead of "Public Objective"
    "objective Created" should read, "Objective Created"
    Creating an objective needs to re-route to quantities, just like editing an objective does.
    
UPDATE 2.15 CREATE QUIZ PUSHED 07/11/17
    When student clicks on the objective, a new quiz instance is created.
    Ripostes (Quiz_question joins) are created for each question associated with that quiz 
    Ruby chooses random questions to put on the quiz
    Add an attribute to riposte to keep track of that riposte's order in the quiz.
    instead of using twenty different answer choices saved and
        twenty different responses, the controller should save an array of correct
        responses. (The array is for future questions where multiple correct
        answers are possible.)
    Now there's a new function to create scores for each student.
        That should be moved from quiz_test into test_helper
        And setup in all models that need it.
    Show total score at top and bottom of quiz report.
    I think that life will be easier and more readable if I give each riposte a
        column to show its points possible.
    Save the whole answer in reponse column of riposte, not just "true" or "false"
    Student sees first question, responds, and submits
        Response is saved in riposte (quiz_question join)
    Student sees second question, etc.
        etc.
    Total score for quiz is calculated
    If student has improved, score for that objective is updated
    Will need to rollback migration after deploy to change the type of the response columns
    
    
    
    
2.16 CONSULTANCIES -- STARTED 07/11/17
                      PUSHED 07/15/17
    Quiz Answer Choice order is randomized
    .pluralize display for the word stars in Quiz report
    Button to go back to class (or at least profile) after taking quiz.
        Add current_class to student modeL
    Consultancy model
        Seminar
        Date
        Has many Teams
    Team model
        Has one topic
        Has one leader
        Has many members
        Type (normal, unplaced, absent)
    Can get rid of studentHash[:placed] 
    Consultancy is created and detailed when teacher chooses "DeskConsulants"
    Desk Consultants view should be changed to be based on @consultancy
        Now see if the view works
    When teacher views class, she can view all the consultancies for that class
    Migrate to add current_class to student
    
2.17 LOCKED QUIZZES -- STARTED 07/15/17
                        PUSHED 07/18/17
    Rename Score to objectiveStudent to follow convention
        Model has "unlocked" attribute
    Rename StudentsTeam to StudentTeam (singular)
    When a consultancy is created, Quiz is unlocked for to all students
        who have that topic
    Students can only see unlocked objectiveS
    Try to implement eager loading where applicable
    Erase oldest consultancy when a class has more than 9
    Erase first consultancy in a day if a second is created.
    
2.18 MULTIPLE QUESTIONS -- STARTED 07/18/2017
                          PUSHED 07/20/2017
    When clicking on "Create a new question," it brings up a form with only one
        spot to choose "public" or "private" and one spot to choose labels. But
        five spots for prompt and answer choice.
    Test for multiple questions
    Header in "Create new Students" view
    Buttons for label and extent aren't showing properly.
    Don't create 5 questions if no prompt is entered for the last few.
    Default checked label